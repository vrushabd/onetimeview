<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Secret Unavailable | OneTimeView</title>
    <meta name="description" content="This one-time link is no longer available because it was viewed, expired, or invalid. Create a new secure link in seconds.">
    <meta name="robots" content="noindex, nofollow">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/static/tailwind-config.js"></script>
    <link rel="stylesheet" href="/static/styles.css">

    <!-- Vercel Web Analytics -->
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
</head>

<body class="bg-background min-h-screen text-text-primary flex items-center justify-center px-4">
    <div class="container mx-auto">
        <div class="max-w-2xl mx-auto text-center space-y-6">
            <div class="flex flex-col items-center gap-4 animate-fade-in">
                <div class="w-14 h-14 rounded-full bg-primary/10 border border-primary/30 flex items-center justify-center">
                    <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" class="text-primary">
                        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                    </svg>
                </div>
                <div>
                    <p class="text-sm uppercase tracking-[0.2em] text-primary">One-time link closed</p>
                    <h1 class="text-3xl sm:text-4xl font-bold text-white mt-2" id="expiredTitle">This secret is unavailable</h1>
                    <p class="text-base sm:text-lg text-text-secondary mt-3" id="expiredReason">
                        It was viewed already, hit its expiry time, or the link was invalid.
                    </p>
                </div>
            </div>

            <div class="bg-card rounded-2xl border border-card-border p-6 sm:p-7 text-left space-y-4 shadow-soft animate-fade-in">
                <div class="flex items-center justify-between flex-wrap gap-2">
                    <h2 class="text-lg sm:text-xl font-semibold text-white">What happened?</h2>
                    <span class="text-xs px-3 py-1 rounded-full bg-primary/10 text-primary-light border border-primary/30">Auto-deleted by design</span>
                </div>
                <ul class="space-y-3 text-sm sm:text-base text-text-secondary">
                    <li class="flex items-start gap-3">
                        <span class="text-primary-light text-lg">•</span>
                        <div><strong>Already viewed:</strong> OneTimeView secrets are destroyed right after the first open.</div>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="text-primary-light text-lg">•</span>
                        <div><strong>Time expired:</strong> It reached its scheduled expiry time and was removed.</div>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="text-primary-light text-lg">•</span>
                        <div><strong>Invalid link:</strong> The URL may be incorrect or the secret never existed.</div>
                    </li>
                </ul>
                <p class="text-sm text-text-muted">Need to share something sensitive? Create a fresh one-time link below.</p>
            </div>

            <div class="flex flex-col sm:flex-row gap-3 justify-center animate-fade-in">
                <a href="/create"
                    class="bg-cta hover:bg-cta-hover text-white font-bold py-3 px-6 rounded-lg transition shadow-soft">
                    Create a new secret
                </a>
                <a href="/"
                    class="bg-card hover:bg-card/80 border border-card-border text-white font-semibold py-3 px-6 rounded-lg transition">
                    Go to homepage
                </a>
            </div>
        </div>
    </div>
    <script>
        (function () {
            const params = new URLSearchParams(window.location.search);
            const reasonParam = params.get('reason');
            const titleEl = document.getElementById('expiredTitle');
            const reasonEl = document.getElementById('expiredReason');

            if (!reasonParam) return;

            const reason = decodeURIComponent(reasonParam);

            if (reason === 'Secret has already been viewed') {
                titleEl.textContent = 'This secret was already viewed';
                reasonEl.textContent = 'For security, this one-time link deleted itself right after it was opened.';
            } else if (reason === 'Secret has expired') {
                titleEl.textContent = 'This secret has expired';
                reasonEl.textContent = 'The secret hit its scheduled expiry time and was permanently removed.';
            } else if (reason === 'Secret not found') {
                titleEl.textContent = 'Secret not found';
                reasonEl.textContent = 'The link may be incorrect, or the secret never existed.';
            }
        })();
    </script>
</body>

</html>